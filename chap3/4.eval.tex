\section{Evaluation}\label{sec:eval}

測定環境
FX100
HA-PACS


\subsection{Ping-pong}

%-- pingpong-code.pdf
\begin{figure}
  \begin{center}
  % trimはleft bottom right topの順
    \mbox{\includegraphics[trim=24mm 118mm 24mm 4mm, scale=0.7,clip]{figs/pingpong-code.pdf}}
    \caption{pingpong-code.pdf}\label{fig:pingpong-code}
  \end{center}
\end{figure}

EPCC CAF benchmark
でこのようなコードを比較（\fig{pingpong-code}）。


\begin{figure}
  %-- fx100-bw.pdf
  \begin{center}
    % trimはleft bottom right topの順
    \mbox{\includegraphics[trim=41mm 190mm 49mm 3mm, scale=0.7,clip]{figs/fx100-bw.pdf}}
    \caption{fx100-bw.pdf FJ-RDMA CA-method}\label{fig:fx100-bw}
  \end{center}
  %-- HAPACS-bw.pdf
  \begin{center}
    % trimはleft bottom right topの順
    \mbox{\includegraphics[trim=45mm 188mm 45mm 3mm, scale=0.7,clip]{figs/HAPACS-bw.pdf}}
    \caption{HAPACS-bw.pdf MPI-3 RS-method}\label{fig:HAPACS-bw}
  \end{center}
\end{figure}

結果は\fig{fx100-bw}

As the result, coarray PUT and GET are slightly outperforms MPI rendezvous 
message-passing for large data.
In \fig{fx100-bw}, the bandwidth of PUT and GET are respectively 
+0.1\% to +18\% and -0.4\% to +9.3\% higher than MPI rendezbous in the 
rendezvous range of 32k through 32M bytes.
Also in \fig{HAPACS-bw}, respectively +0.3\% to +0.8\% and 
+0.1\% to +1.3\% higher in the rendezvous range of 512k through 32M bytes.

However, coarray PUT and GET are clearly slower than the MPI eager 
communication in the range of shorter length data.

分析:
PUT/GETがeagerに比べて遅い理由は、ack待ちとsync allのオーバヘッド
eagerにはこのようなオーバヘッドがない。RDMAでないのでコピーがあるけれども。



%-- nonblock-fig.pdf
\begin{figure}[tbh]
  \begin{center}
  % trimはleft bottom right topの順
    \mbox{\includegraphics[trim=43mm 144mm 43mm 3mm, scale=0.7,clip]{figs/nonblock-fig-r2.pdf}}
    \caption{nonblock-fig.pdf}\label{fig:nonblock-fig}
  \end{center}
\end{figure}

改善を検討（\fig{nonblock-fig}）。
文面はどこかにある。


\begin{figure}
  %-- 8var-pipo-bw.pdf
  \begin{center}
  % trimはleft bottom right topの順
    \mbox{\includegraphics[trim=40mm 180mm 43mm 0mm, scale=0.8,clip]{figs/8var-pipo-bw.pdf}}
    \caption{8var-pipo-bw.pdf}\label{fig:8var-pipo-bw}
  \end{center}
%   %-- 8var-pipo-latency.pdf
%   \begin{center}
%   % trimはleft bottom right topの順
%     \mbox{\includegraphics[trim=40mm 155mm 40mm 0mm, scale=0.8,clip]{figs/8var-pipo-latency.pdf}}
%     \caption{8var-pipo-latency.pdf}\label{fig:8var-pipo-latency}
%   \end{center}
\end{figure}

その結果のthroughput（\fig{8var-pipo-bw}）。
% その結果のthroughputとlatency（\fig{8var-pipo-bw}, \fig{8var-pipo-latency}）。



\subsection{Himeno Benchmark}

説明はどこかにある。\fig{himeno-graph}

%-- himeno-graph.pdf
\begin{figure}[p]
  \begin{center}
  % trimはleft bottom right topの順
    \mbox{\includegraphics[trim=37mm 34mm 37mm 4mm, scale=0.8,clip]{figs/himeno-graph-r2.pdf}}
    \caption{himeno-graph-r2.pdf}\label{fig:himeno-graph}
  \end{center}
\end{figure}


マシン名要確認。ころころ変えていないか。


% %-- 3cell-y.pdf
% %-- 3cell-z.pdf
% \begin{figure}[tbh]
%   \begin{center}
%   % trimはleft bottom right topの順
%   \fbox{\includegraphics[trim=98mm 235mm 98mm 0mm, scale=0.8,clip]{figs/3cell-y.pdf}}  \\
%   \fbox{\includegraphics[trim=85mm 261mm 85mm 0mm, scale=0.8,clip]{figs/3cell-z.pdf}}  \\
%   \fbox{\includegraphics[trim=82mm 230mm 84mm 0mm, scale=0.8,clip]{figs/9cell-yz.pdf}}
%   \caption{3cell-y.pdf, 3cell-z.pdf, 9cell-yz.pdf}\label{fig:cell}
%   \end{center}
% \end{figure}


%-- fx100-pipo.pdf
%    \fbox{\includegraphics[trim=4mm 15mm 4mm 3mm, scale=0.9,clip]{figs/fx100-pipo.pdf}}

%himeno.pdf
%latency-16var.pdf
%layer.pdf

%register-CA-tmp.pdf
%register-RA-CA-tmp.pdf
%register-RA-tmp.pdf
%softstack.pdf
%translator-tmp.pdf
